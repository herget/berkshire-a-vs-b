<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Berkshire Class A vs B, What's Your Pick?</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      async function fetchStockData(stockSymbol) {
        // Fetch stock data from Yahoo Finance
        const url =
          "https://corsproxy.io/?" +
          encodeURIComponent(
            `https://query1.finance.yahoo.com/v7/finance/options/${stockSymbol}`
          );
        try {
          const response = await fetch(url);
          const data = await response.json();
          console.log(data);
          return data.optionChain.result[0];
        } catch (error) {
          console.error("Error fetching stock data:", error);
        }
      }

      async function displayStockData() {
        // Fetch data for Class A and Class B shares
        const classAData = await fetchStockData("BRK-A");
        const classBData = await fetchStockData("BRK-B");

        // Display data in your HTML
        document.getElementById(
          "class-a-price"
        ).textContent = `Class A Price: $${classAData.quote.regularMarketPrice}`;
        const classBPrice = classBData.quote.regularMarketPrice;
        document.getElementById(
          "class-b-price"
        ).textContent = `Class B Price: $${classBPrice}`;

        // Calculate Class A price equivalent to Class B
        const classARatio = classBPrice * 1500;
        const classAPrice = classAData.quote.regularMarketPrice;

        // Display Class A price (1500x) and 1% minus of Class A price
        document.getElementById(
          "class-a-ratio"
        ).textContent = `Class B Price (1500x): $${classARatio}`;
        document.getElementById(
          "class-a-percentage"
        ).textContent = `1% minus of Class A Price: $${classAPrice * 0.99}`;

        // Compare prices and provide a recommendation
        if (classARatio < classAPrice * 0.99) {
          document.getElementById("decision-suggestion").textContent =
            "Class B";
        } else {
          document.getElementById("decision-suggestion").textContent =
            "Class A";
        }

        // Calculate and display Absolute Price Difference and Percent Cheaper
        const absolutePriceDifference = Math.abs(classARatio - classAPrice);
        const percentCheaper = Math.abs(
          ((classARatio - classAPrice) / classARatio) * 100
        );

        document.getElementById(
          "price-difference"
        ).textContent = `$${absolutePriceDifference.toFixed(0)}`;
        document.getElementById(
          "cheaper-percent"
        ).textContent = `${percentCheaper.toFixed(2)}%`;
      }

      window.onload = displayStockData;
    </script>
  </head>
  <body class="">
    <div class="container mx-auto mb-6">
      <h1 class="text-4xl font-bold text-center text-indigo-600 my-6">
        Berkshire Class A vs B
      </h1>
      <!-- Quote Section -->
      <div class="quote-section shadow-lg rounded-lg p-6">
        <p class="text-lg mb-4">
          "In my opinion, when the B shares are at a discount of more than 1%,
          it offers a better buy than the A shares."
        </p>
        <p class="text-lg font-semibold text-indigo-600">- Warren Buffett</p>
        <a
          href="https://brkshr.com/class.html"
          target="_blank"
          class="text-blue-600 hover:underline"
          >January 20, 2010</a
        >
      </div>
    </div>
    <div class="container mx-auto px-6 py-8 bg-indigo-200 rounded-lg mb-8">
      <div class="">
        <p>
          <strong>Recommended Buy Today:</strong>
          <span id="decision-suggestion"></span>
        </p>
      </div>
    </div>

    <div class="container mx-auto">
      <div class="p-6 mb-8 flex flex-col gap-4">
        <p class="text-lg font-semibold mb-2">Live Analysis:</p>
        <p>
          Let's compare the current market prices:
          <span id="class-a-price">Class A Price</span>
          (<a
            href="https://finance.yahoo.com/quote/BRK-A"
            target="_blank"
            class="text-blue-600 hover:underline"
            >BRK-A</a
          >) and
          <span id="class-b-price">Class B Price</span>
          (<a
            href="https://finance.yahoo.com/quote/BRK-B"
            target="_blank"
            class="text-blue-600 hover:underline"
            >BRK-B</a
          >).
        </p>
        <p>
          How does Class B price stack up when multiplied by 1500?
          <span id="class-a-ratio">Calculating...</span>
        </p>
        <p>
          What's 1% less than the Class A price?
          <span id="class-a-percentage">Hang tight, calculating...</span>
        </p>
        <p>
          What's the absolute price difference between these calculations?
          <span id="price-difference">Working on it...</span>
        </p>
        <p>
          How much cheaper is Class B?
          <span id="cheaper-percent">Almost there...</span>
        </p>
      </div>
    </div>

    <!-- Footer -->
    <div class="footer text-center py-6">
      <p>
        Discover more investment insights at
        <a
          href="https://gherget.com/investing-guide"
          class="text-blue-600 hover:underline"
          >gherget.com/investing-guide</a
        >
      </p>
    </div>
  </body>
</html>
